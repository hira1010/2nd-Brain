# 📘 レミの兵法投資：漫画制作・生成マニュアル

このドキュメントは、漫画「レミの兵法投資」を制作・生成するための全プロセスをまとめたものです。

---

## 📂 1. ディレクトリ構成と役割

プロジェクトは以下のシンプルな構造に整理されています。

- **`01_ストーリー/`** (最重要)
  - 漫画の脚本（Markdownファイル）は全てここにあります。
  - EP01〜EP23まで、ストーリー順に並んでいます。
  - **作業場所**: 基本的にこのフォルダ内のファイルを編集します。

- **`99_資産_Assets/`**
  - **`030プロンプト/`**, **`101プロンプト/`**: 過去のプロンプト集や知識集。
  - **`05_設定/`**: キャラクター設定、世界観設定など。
  - このマニュアルもここに保存されます。

- **`_System_Tools/`**
  - **`_update_themes.py`**: 特定のエピソード（EP4.5, 6.5など）のキーワード枠を自動更新するスクリプト。
  - **`read_file.py`**: ファイル読み込み用ツール（システム用）。

---

## 🚀 2. 制作・生成フロー (5ステップ)

### Step 1: シナリオの執筆・修正

1. `01_ストーリー/` 内の該当エピソード（例: `EP03_誘惑の囁き_P11-15.md`）を開きます。
2. セリフやト書きをMarkdown形式で記述します。
3. **重要**: 8つの主要テーマ（未来年表、複利など）に関わるエピソードの場合、キーワード枠の更新が必要です（Step 2へ）。

### Step 2: キーワード枠の自動更新 (該当する場合)

主要な学習回（EP04.5, 06.5, 08.5, 10.5, 12.5, 15.5, 17.5, 20.5）の内容を変更した場合、以下のコマンドを実行してキーワード枠を最新化します。

```bash
# プロジェクトルートで実行
python _System_Tools/_update_themes.py
```

* これにより、定義済みの正しいキーワードやレミの解説文がファイルに適用されます。

### Step 3: 画像生成プロンプトの作成

AIに画像を描かせるための指示書（プロンプト）を記述します。
Markdownファイル内に `generate_image` ブロックを記述します。

**⚠️ 絶対ルール (Visual Lock)**
キャラクターの見た目を固定するため、以下の呪文を**必ず**含めてください。

| キャラクター | 必須プロンプト (英語) | 注意点 |
| :--- | :--- | :--- |
| **レミ** | `(Silver Long Hair, Hime-cut), (Sharp Red Eyes), ((Crimson Red Suit Jacket)), ((Black Lace Camisole)), ((Tight Red Skirt)), ((Black Pantyhose))` | **赤スーツ、黒レース**が絶対です。 |
| **優斗** | `(Short Black hair), ((Navy Blue Suit)), ((White Shirt)), ((Blue Tie))` | **紺スーツ、青ネクタイ**。手袋はNG (`((Bare Hands))`)。 |

**入力例:**

```javascript
generate_image(
  ImageName: "remi_ep03_p15_v1",
  Prompt: "((NO TEXT)). [Scene]: Remi (Silver hair, Red Suit...). Yuto (Blue Suit, Bare Hands). [Panel 1]: ..."
)
```

### Step 4: 画像の生成

1. **AIアシスタントに依頼する場合**:
   チャット欄で「EP03のP15を生成して」と依頼します。Step 3で書いたプロンプトを元に生成されます。
2. **外部ツール (Midjourney等) を使う場合**:
   `Prompt:` の中身（`"..."` の部分）をコピーして実行します。
   - 比率指定: `--ar 2:3` (縦長)
   - スタイル: `High-end Anime`

### Step 5: 確認と微調整

生成された画像を確認します。

- **服は合っているか？** (レミのインナーは黒レースか？ 優斗は素手か？)
- **構図は正しいか？**
修正が必要な場合は、プロンプトの重み付け `(( ))` を増やしたり、`NEGATIVE PROMPT` に除外したい要素（例: `((gloves))`）を追加して再生成します。

---

## ⚡ 困ったときは

- **「レミの服が違う！」**
  → プロンプトに `((Crimson Red Suit))` `((Black Lace Camisole))` が入っているか確認。
- **「優斗が手袋をしてる！」**
  → Negative Promptに `((gloves))` を追加し、Positiveに `((Bare Hands))` を追加。
- **「ファイルがどこかわからない」**
  → `00_全体マップ.md` を見てください。全てのファイルへのリンクがあります。
